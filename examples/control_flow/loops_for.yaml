workflows:
  - name: main
    interface:
      inputs: []
      outputs: []
    variables: {}
    nodes:
      start:
        opcode: workflow_start
        next: print_header
        inputs: {}

      print_header:
        opcode: io_print
        next: test_basic_for
        inputs:
          STRING:
            literal: "=== Testing control_for ===\n\n"

      # Test 1: Basic for loop 0 to 5
      test_basic_for:
        opcode: io_print
        next: for_loop_1
        inputs:
          STRING:
            literal: "Test 1: Basic for loop (0 to 5):\n"

      for_loop_1:
        opcode: control_for
        next: test_with_step
        inputs:
          VAR:
            literal: "i"
          START:
            literal: 0
          END:
            literal: 5
          BODY:
            branch: print_i

      print_i:
        opcode: io_print
        next: null
        inputs:
          STRING:
            variable: i

      # Test 2: For loop with step
      test_with_step:
        opcode: io_print
        next: for_loop_2
        inputs:
          STRING:
            literal: "\n\nTest 2: For loop with step=2 (0 to 10):\n"

      for_loop_2:
        opcode: control_for
        next: test_with_start
        inputs:
          VAR:
            literal: "j"
          START:
            literal: 0
          END:
            literal: 10
          STEP:
            literal: 2
          BODY:
            branch: print_j

      print_j:
        opcode: io_print
        next: null
        inputs:
          STRING:
            variable: j

      # Test 3: For loop with start != 0
      test_with_start:
        opcode: io_print
        next: for_loop_3
        inputs:
          STRING:
            literal: "\n\nTest 3: For loop (5 to 8):\n"

      for_loop_3:
        opcode: control_for
        next: print_footer
        inputs:
          VAR:
            literal: "k"
          START:
            literal: 5
          END:
            literal: 8
          BODY:
            branch: print_k

      print_k:
        opcode: io_print
        next: null
        inputs:
          STRING:
            variable: k

      print_footer:
        opcode: io_print
        next: null
        inputs:
          STRING:
            literal: "\n\nâœ… All control_for tests passed!\n"
