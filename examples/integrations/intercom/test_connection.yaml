# Intercom Connection Test - List admins (read-only)
#
# Usage:
#   lexflow examples/integrations/intercom/test_connection.yaml \
#     --input token=YOUR_INTERCOM_TOKEN

workflows:
  - name: main
    interface:
      inputs: ["token"]
      outputs: []
    variables:
      token: ""
    nodes:
      start:
        opcode: workflow_start
        next: create_client
        inputs: {}

      create_client:
        opcode: intercom_create_client
        isReporter: true
        inputs:
          token: { variable: token }
        next: list_admins

      list_admins:
        opcode: intercom_list_admins
        isReporter: true
        inputs:
          client: { node: create_client }
        next: print_result

      print_result:
        opcode: io_print
        inputs:
          value: { node: list_admins }
        next: null
