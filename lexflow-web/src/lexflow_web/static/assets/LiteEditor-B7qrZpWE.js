import{r as o,j as s,c as u,e as N,a as y,b as S,d as R,f as T}from"./index-b3xL0S4g.js";function k({className:m,value:r,onChange:a,isParsing:h}){const i=o.useRef(null),d=o.useRef(null),p=o.useCallback(e=>{if(e.key==="Tab"){e.preventDefault();const t=e.currentTarget,n=t.selectionStart,l=t.selectionEnd,c=r.substring(0,n)+"  "+r.substring(l);a(c),requestAnimationFrame(()=>{t.selectionStart=t.selectionEnd=n+2})}},[r,a]),g=o.useCallback(e=>{a(e.target.value)},[a]),b=o.useCallback(()=>{i.current&&d.current&&(d.current.scrollTop=i.current.scrollTop)},[]);o.useEffect(()=>{const e=t=>{const n=i.current;if(!n)return;const l=r.split(`
`),c=Math.min(Math.max(1,t.detail.line),l.length);let f=0;for(let x=0;x<c-1;x++)f+=l[x].length+1;n.focus(),n.setSelectionRange(f,f);const E=20;n.scrollTop=(c-1)*E-n.clientHeight/2};return window.addEventListener("lexflow:goto-line",e),()=>{window.removeEventListener("lexflow:goto-line",e)}},[r]);const w=r.split(`
`).length,j=Array.from({length:w},(e,t)=>t+1);return s.jsxs("div",{className:u(T(),m),children:[s.jsxs("div",{className:N(),children:[s.jsx("span",{className:y(),children:"Editor"}),h&&s.jsx("span",{className:S(),children:"Parsing..."})]}),s.jsxs("div",{className:u(R(),"flex"),children:[s.jsx("div",{ref:d,className:"flex-none w-12 bg-surface-1 text-text-muted text-sm font-mono text-right py-2 pr-2 overflow-hidden select-none",style:{lineHeight:"20px"},children:j.map(e=>s.jsx("div",{children:e},e))}),s.jsx("textarea",{ref:i,value:r,onChange:g,onKeyDown:p,onScroll:b,spellCheck:!1,className:u("flex-1 resize-none p-2","bg-surface-0 text-text-primary","font-mono text-sm","border-none outline-none","focus:ring-0 focus:outline-none"),style:{lineHeight:"20px",tabSize:2}})]})]})}export{k as LiteEditor};
